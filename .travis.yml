language: node_js

node_js:
    - '10'
    - '11'
    - '12'

os:
    - linux

install:
    - npm install

script:
    - if [ "$TRAVIS_NODE_VERSION" == "12" ]; then npm run-script coverage; else npm test; fi

after_success:
    - if [ "$TRAVIS_NODE_VERSION" == "12" ]; then npm install https://github.com/alekitto/ocular.js.git; fi
    - if [ "$TRAVIS_NODE_VERSION" == "12" ]; then $(npm bin)/ocular coverage/clover.xml; fi

jobs:
    include:
        - stage: lint
          node_js: "12"
          os: linux
          script:
              - npm install -g eslint
              - npm run-script lint
